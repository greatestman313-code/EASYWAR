@import url('https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700&display=swap');
:root{
  --bg:#121212;            /* dark gray */
  --panel:#181a1f;         /* sidebars / surfaces */
  --panel-light:#1f2229;   /* chat pane slightly lighter */
  --muted:#aab4c8;
  --text:#e7eaf0;
  --line:#2a2e37;
  --accent:#6ea8ff;
  --accent-2:#3b6df3;
  --green:#22c55e;
  --red:#ef4444;
  --shadow: 0 10px 30px rgba(0,0,0,.35);
}

*{box-sizing:border-box}
html,body{margin:0;background:var(--bg);color:var(--text);font-family:'Cairo',system-ui,Segoe UI,Arial,sans-serif;font-size:12px;direction:rtl}
html, body{margin:0;background:var(--bg);color:var(--text);font-family:'Cairo',system-ui,Segoe UI,Arial,sans-serif;font-size:16px;direction:rtl}
body{margin:0;background:var(--bg);color:var(--text);font-family:'Cairo',system-ui,Segoe UI,Arial,sans-serif;font-size:16px;direction:rtl}
a{color:var(--accent);text-decoration:none}
button{font:inherit;transition:.15s ease all}

.container{
  display:grid;
  grid-template-columns: 300px 1fr; /* left / center / right */
  min-height:100vh;
}

/* Sidebars fixed look; scroll inside only */
.sidebarL,.sidebarR{
  background:var(--panel);
  border-inline:1px solid var(--line);
  display:flex;flex-direction:column;gap:12px;padding:16px;
  overflow:auto; /* only sidebars scroll internally */
}
.sidebarL{border-inline-start:none}
.sidebarR{border-inline-end:none}

.brand{display:flex;align-items:center;gap:8px;margin-bottom:8px}
.brand .dot{width:10px;height:10px;border-radius:50%;background: radial-gradient(circle at 40% 40%, var(--accent), var(--accent-2))}

.sectionTitle{font-size:12px;opacity:.6;margin-top:10px}
.btn, .ctrl, .toggle, .pill, .plus, .voice, .send, .toolBtn{
  padding:10px 12px;border:1px solid var(--line);border-radius:12px;background:#20232b;color:var(--text);cursor:pointer
}
.btn:hover, .ctrl:hover, .toggle:hover, .pill:hover, .plus:hover, .voice:hover, .send:hover, .toolBtn:hover{
  background:#282c36; /* lighter on hover */
  border-color:#3a3f4d;
}
.icon{opacity:.9;margin-inline-start:6px}

/* Center column */
.main{display:flex;flex-direction:column;min-height:100vh;background:var(--panel-light)}
.header{height:56px;display:flex;align-items:center;justify-content:space-between;border-bottom:1px solid var(--line);padding:0 16px;background:rgba(24,26,31,.7);backdrop-filter: blur(6px);position:sticky;top:0;z-index:5}
.title{display:flex;gap:10px;align-items:center}
.badge{padding:4px 8px;border-radius:999px;background:#20232b;border:1px solid var(--line);color:var(--muted);font-size:12px}
.controls{display:flex;align-items:center;gap:8px;opacity:.95}
.kebabMenu{position:absolute;top:56px;inset-inline-end:16px;background:#20232b;border:1px solid var(--line);border-radius:12px;padding:8px;display:grid;gap:6px;z-index:20;box-shadow:var(--shadow)}
.kebabItem{display:flex;align-items:center;gap:8px;padding:8px 10px;border:1px solid var(--line);border-radius:10px;background:#0f172a0a}
.kebabItem:hover{background:#2a2f3a}

.chatArea{flex:1;overflow:auto;padding:24px;display:flex;justify-content:center}
.chatInner{width:min(880px,100%);display:flex;flex-direction:column;gap:16px}
.divider{height:1px;background:linear-gradient(90deg,transparent,#2a2e37,transparent);margin:10px 0}

/* Messages */
.message{display:flex;gap:12px;padding:0;border-radius:14px;position:relative}
.message .avatar{width:28px;height:28px;border-radius:8px;display:grid;place-items:center;background:#20232b;border:1px solid var(--line);color:var(--muted);font-size:12px;flex:0 0 28px;margin-top:6px}
.message .content{line-height:1.9;white-space:pre-wrap;word-wrap:break-word;padding:12px 14px;border-radius:14px;background:transparent;border:1px solid transparent}
.message.user .content{background:#20232b;border:1px solid var(--line)} /* user bubbles only */
.message.assistant .content{background:transparent;border:none}          /* assistant flat */

/* code bubble */
.message pre{background:#14171d;border:1px solid #2a2e37;padding:12px;border-radius:12px;overflow:auto}
.message code{background:#14171d;border:1px solid #2a2e37;padding:2px 6px;border-radius:6px}

/* message actions row (emoji etc.) */
.msgActions{display:flex;gap:8px;margin:4px 8px 0 8px;opacity:.9}
.msgActions .pill{font-size:12px;padding:6px 8px}
.pill.reaction{min-width:34px;height:34px;display:inline-grid;place-items:center;border-radius:999px;padding:0 10px}
.pill.reaction:hover{transform:translateY(-1px)}

/* link/source chips */
.sourceChips{display:flex;flex-wrap:wrap;gap:6px;margin-top:6px}
.sourceChip{font-size:12px;padding:4px 8px;border:1px solid var(--line);border-radius:999px;background:#20232b}
.sourceChip:hover{background:#2a2f3a}

/* composer */
.composerWrap{border-top:1px solid var(--line);padding:12px;background:linear-gradient(180deg, rgba(0,0,0,0), rgba(0,0,0,.25))}
.composer{width:min(880px,100%);margin:0 auto;display:flex;gap:10px;background:#20232b;border:1px solid var(--line);border-radius:16px;padding:8px;align-items:flex-end;position:relative}
.textarea{flex:1;max-height:300px;min-height:52px;resize:none;background:transparent;border:none;color:var(--text);outline:none;padding:10px}
.scrollDown{position:sticky;bottom:76px;margin:0 auto;width:min(880px,100%);display:flex;justify-content:flex-end}
.scrollDown button{border-radius:999px;padding:8px 12px;background:#20232b;border:1px solid var(--line)}
.scrollDown button:hover{background:#2a2f3a}

.plusMenu{position:absolute;bottom:70px;inset-inline-start:8px;width:420px;max-width:calc(100% - 16px);background:#20232b;border:1px solid var(--line);border-radius:14px;padding:10px;display:grid;grid-template-columns:1fr 1fr;gap:8px;box-shadow:var(--shadow)}
.toolBtn{display:flex;align-items:center;gap:8px;justify-content:flex-start}

.status{position:absolute;top:8px;left:50%;transform:translateX(-50%);display:flex;gap:8px;align-items:center;background:#20232b;border:1px solid var(--line);padding:6px 10px;border-radius:999px;font-size:12px;box-shadow:var(--shadow)}
.typing{display:inline-flex;gap:6px;align-items:center}
.typing .dot{width:6px;height:6px;border-radius:50%;background:var(--muted);opacity:.5;animation:td 1.2s infinite}
.typing .dot:nth-child(2){animation-delay:.2s}
.typing .dot:nth-child(3){animation-delay:.4s}
@keyframes td{0%{transform:translateY(0);opacity:.3}50%{transform:translateY(-2px);opacity:.9}100%{transform:translateY(0);opacity:.3}}

/* glow line under header when thinking */
.thinkGlow{position:sticky; top:56px; height:2px; width:100%; background:linear-gradient(90deg, rgba(110,168,255,.0) 0%, rgba(110,168,255,.9) 50%, rgba(110,168,255,.0) 100%); filter:drop-shadow(0 0 6px rgba(110,168,255,.8)); animation:glow 1.4s linear infinite}
@keyframes glow{0%{background-position:0% 0}100%{background-position:200% 0}}

.toast{position:fixed;bottom:16px;left:50%;transform:translateX(-50%);background:#20232b;border:1px solid var(--line);padding:10px 14px;border-radius:12px;box-shadow:var(--shadow);z-index:50}

@media (max-width: 1200px){
  .container{grid-template-columns: 280px 1fr}
  .sidebarR{display:none}
}
@media (max-width: 900px){
  .container{grid-template-columns: 1fr}
  .sidebarL{display:none}
}

.sidebarR{display:none !important}


/* Segmented tabs (vertical stack) under "New chat" */
.tabs{
  display:flex;
  flex-direction:column;
  gap:6px;
  border:1px solid var(--line);
  border-radius:12px;
  padding:4px;
  margin-top:8px;
  background:transparent;
}

.tab{
  width:100%;
  display:flex;
  align-items:center;
  justify-content:center;
  gap:8px;
  padding:8px 10px;
  border-radius:10px;
  background:transparent;
  border:1px solid transparent;
  color:var(--text);
  cursor:pointer;
  text-decoration:none;
}
.tab:hover{
  background:#282c36;
  border-color:#3a3f4d;
}
.tab svg{width:16px;height:16px;opacity:.9}
.tabActive{background:#242833;border-color:#3a3f4d}

/* Tabs look & states */
.tab{
  width:100%;
  display:flex;
  align-items:center;
  justify-content:space-between; /* توحيد المحاذاة على سطر واحد */
  gap:8px;
  padding:10px 12px;
  border-radius:10px;
  background:transparent;
  border:1px solid transparent;
  color:var(--text);
  cursor:pointer;
  text-decoration:none;
}
.tab:hover{ background:#282c36; border-color:#3a3f4d }
.tabActive{ background:#242833; border-color:#3a3f4d }
.tab svg{ width:16px; height:16px; opacity:.9 }

/* Sticky brand & footer user */
.sidebarL .brand{ position:sticky; top:0; z-index:5; padding-bottom:8px; background:var(--bg); }
.sidebarL .footerUser{ position:sticky; bottom:0; padding-top:8px; background:linear-gradient(180deg, transparent, rgba(0,0,0,.15)); }

/* Sidebar collapse helper */

.container.withoutSidebar{ grid-template-columns: 0 1fr !important; }

/* Scroll rail (Up/Down) */
.scrollRail{
  position:absolute;
  right:8px;
  bottom:120px;
  display:flex;
  flex-direction:column;
  gap:8px;
  z-index:5;
}
.scrollRail .railBtn{
  width:38px;
  height:38px;
  display:flex;
  align-items:center;
  justify-content:center;
  border-radius:10px;
  background:#20232b;
  border:1px solid var(--line);
  color:var(--text);
  cursor:pointer;
}
.scrollRail .railBtn:hover{ background:#282c36 }

/* Sidebar show/hide toggle */
.sidebarToggle{
  position:sticky;
  top:52px;
  margin-inline-start:auto;
  margin-bottom:8px;
  z-index:6;
  width:36px;height:36px;
  display:flex;align-items:center;justify-content:center;
  border-radius:10px;border:1px solid var(--line); background:#20232b; color:var(--text);
}
.sidebarToggle:hover{ background:#282c36 }

/* Top header sticky inside main */
.main .header{ position:sticky; top:0; z-index:5; }

/* Collapsed sidebar keeps layout alive */
.sidebarL.collapsed{ width:0 !important; padding:0 !important; overflow:hidden; border:none !important; }
.container.withoutSidebar{ grid-template-columns: 0 1fr !important; }
/* Floating reopen button when sidebar hidden */
.sidebarReopen{
  position:fixed;
  inset-inline-start:12px;
  top:12px;
  z-index:9999;
  width:40px;height:40px;
  display:flex;align-items:center;justify-content:center;
  border-radius:12px;
  border:1px solid var(--line);
  background:#20232b;
  color:var(--text);
  box-shadow:0 4px 20px rgba(0,0,0,.35);
  cursor:pointer;
}
.sidebarReopen:hover{ background:#282c36 }

/* Sidebar layout */
.sidebarL{ display:flex; flex-direction:column; height:100vh; }
.brandRow{ position:sticky; top:0; z-index:10; padding:8px 10px; background:var(--bg); display:flex; align-items:center; justify-content:space-between; border-bottom:1px solid var(--line); }
.sidebarBody{ flex:1; overflow:auto; padding:0 6px; }
.footerUserWrap{ position:sticky; bottom:0; padding:8px 6px 10px; background:linear-gradient(180deg, rgba(0,0,0,.0), rgba(0,0,0,.18)); }

.brandToggle{ width:36px; height:36px; display:flex; align-items:center; justify-content:center; border-radius:10px; border:1px solid var(--line); background:#20232b; color:var(--text); cursor:pointer; }
.brandToggle:hover{ background:#282c36 }

/* Tabs alignment with icons */
.tabs{ display:flex; flex-direction:column; gap:6px; border:1px solid var(--line); border-radius:12px; padding:4px; margin-top:8px; background:transparent; }
.tab{ width:100%; display:grid; grid-template-columns: 20px 1fr; align-items:center; gap:10px; padding:10px 12px; border-radius:10px; background:transparent; border:1px solid transparent; color:var(--text); text-decoration:none; cursor:pointer; }
.tab:hover{ background:#282c36; border-color:#3a3f4d }
.tabActive{ background:#242833; border-color:#3a3f4d }
.tab .icon{ display:flex; align-items:center; justify-content:center; }
.tab svg{ width:16px; height:16px; opacity:.9 }

/* Floating reopen survives */
.sidebarReopen{ position:fixed; inset-inline-start:12px; top:12px; z-index:9999; width:40px;height:40px; display:flex; align-items:center; justify-content:center; border-radius:12px; border:1px solid var(--line); background:#20232b; color:var(--text); box-shadow:0 4px 20px rgba(0,0,0,.35); cursor:pointer; }
.sidebarReopen:hover{ background:#282c36 }

/* === v4.5.1 ensure definitions (243-263 region) === */
.brandToggle{ width:36px; height:36px; display:flex; align-items:center; justify-content:center; border-radius:10px; border:1px solid var(--line); background:#20232b; color:var(--text); cursor:pointer; }
.brandToggle:hover{ background:#282c36 }

/* Tabs alignment with icons */
.tabs{ display:flex; flex-direction:column; gap:6px; border:1px solid var(--line); border-radius:12px; padding:4px; margin-top:8px; background:transparent; }
.tab{ width:100%; display:grid; grid-template-columns: 20px 1fr; align-items:center; gap:10px; padding:10px 12px; border-radius:10px; background:transparent; border:1px solid transparent; color:var(--text); text-decoration:none; cursor:pointer; }
.tab:hover{ background:#282c36; border-color:#3a3f4d }
.tabActive{ background:#242833; border-color:#3a3f4d }
.tab .icon{ display:flex; align-items:center; justify-content:center; }
.tab svg{ width:16px; height:16px; opacity:.9 }

/* Floating reopen survives */
.sidebarReopen{ position:fixed; inset-inline-start:12px; top:12px; z-index:9999; width:40px;height:40px; display:flex; align-items:center; justify-content:center; border-radius:12px; border:1px solid var(--line); background:#20232b; color:var(--text); box-shadow:0 4px 20px rgba(0,0,0,.35); cursor:pointer; }
.sidebarReopen:hover{ background:#282c36 }

/* === Custom dark scrollbar for sidebar === */
.sidebarBody{ overflow:auto; padding-inline-end:8px; }
.sidebarBody::-webkit-scrollbar{ width:10px; }
.sidebarBody::-webkit-scrollbar-track{ background:#0f1116; border-radius:8px; }
.sidebarBody::-webkit-scrollbar-thumb{ background:#1e2230; border-radius:8px; }
.sidebarBody::-webkit-scrollbar-thumb:hover{ background:#272c3a; box-shadow:0 0 8px rgba(120,160,255,.35); }

/* Solid sticky footer user */
.footerUserWrap{ position:sticky; bottom:0; padding:10px 6px 12px; background:var(--bg); border-top:1px solid var(--line); }
.footerUser{ background:#20232b !important; border:1px solid var(--line) !important; opacity:1 !important; }

/* Remove any scroll-rail artifacts */
.scrollRail, .scrollUp, .scrollDown{ display:none !important; }

.btn{font-size:12px}

/* === UserMenu styles === */

.userMenuWrap{ position: relative; width: 100%; }
.userDropdown{
  position: absolute; inset-inline: 8px 8px; bottom: 56px;
  background: #171a21; border:1px solid var(--line); border-radius:14px;
  box-shadow: 0 10px 40px rgba(0,0,0,.45);
  padding:10px; display:flex; flex-direction:column; gap:6px; z-index:60;
  font-size:12px;
}
.userDropdownEmail{
  background:#0f1116; border:1px solid var(--line); border-radius:10px;
  padding:10px; color:var(--muted);
  direction:ltr; text-align:start; font-weight:600;
}
.userItem{
  display:flex; align-items:center; justify-content:space-between;
  gap:8px; padding:10px 12px; border-radius:10px; background:#1a1f29;
  border:1px solid transparent; text-align:start;
}
.userItem:hover{ background:#202635; border-color:#2a3345; }
.userItem.danger{ color:#ff6b6b; background:#211416; }
.userItem.danger:hover{ background:#2a191b; border-color:#3a2022; }
.userItem.hasSub{ cursor:pointer; }
.userItem .arrow{ opacity:.8; }

.userSubmenu{
  margin:2px 0 8px 0; padding:6px; background:#11151c; border:1px solid var(--line);
  border-radius:10px; display:flex; flex-direction:column; gap:6px;
}
.userSubItem{
  padding:8px 10px; background:#1a1f29; border-radius:8px; border:1px solid transparent;
}
.userSubItem:hover{ background:#202635; border-color:#2a3345; }

/* === UserMenu styles === */

.pagePad, .docWrap{ padding:20px; max-width:900px; margin:0 auto; }
.docWrap h1{ font-size:18px; margin:0 0 10px 0; }
.docWrap h2{ font-size:14px; margin:14px 0 6px; }
.linksList{ display:grid; gap:8px; }
.linksList a{ color:#9fc1ff; }
.table{ width:100%; border-collapse:collapse; }
.table td{ border-bottom:1px solid var(--line); padding:8px; }
.cards2{ display:grid; grid-template-columns:repeat(auto-fit,minmax(240px,1fr)); gap:14px; }
.plan{ background:#141824; border:1px solid var(--line); border-radius:14px; padding:14px; }
.plan.highlight{ background:#1a1f2b; border-color:#2a3345; }
.plan .price{ font-size:22px; font-weight:700; margin:8px 0; }
.formGrid{ display:grid; gap:10px; }
.formGrid label{ display:grid; gap:6px; }
.formGrid input, .formGrid textarea, .formGrid select{
  background:#20232b; border:1px solid var(--line); border-radius:10px; color:var(--text); padding:10px;
}
.chips{ display:flex; flex-wrap:wrap; gap:6px; margin-top:6px; }
.chip{ border:1px solid var(--line); background:#1a1f29; border-radius:999px; padding:6px 10px; }
.chip.active{ background:#2a3345; }
.toggles{ display:flex; gap:16px; padding:8px 0; }
.actions{ display:flex; gap:8px; justify-content:flex-end; }
.btn.ghost{ background:transparent; border:1px solid var(--line); }


/* === Sidebar tweaks per user's request === */
.sidebarBody > .btn:first-child{ width:100%; justify-content:center; text-align:center; }
.sidebarBody > .btn:first-child::before{ content:''; } /* keep only the explicit icon in text */

/* Tabs: smaller font & no borders */
.tabs{ border:none !important; background:transparent !important; padding:0 !important; gap:8px !important; }
.tab{ font-size:12px !important; border:none !important; background:transparent !important; padding:10px 12px !important; }
.tab:hover{ background:#1b1e24 !important; border:none !important; }
.tabActive{ background:#20242c !important; border:none !important; }


/* === UserMenu side popover === */
.userMenuRoot{ position:relative; }
.userMenuBtn{ width:100%; display:flex; align-items:center; gap:8px; padding:10px 12px; border-radius:14px; background:#121418; border:1px solid var(--line); color:var(--text); }
.userMenuBtn:hover{ background:#161a20; }
.userMenuPanel{ position:fixed; top:var(--y); z-index:1000; min-width: 300px; background:#0f1217; border:1px solid #1f2630; border-radius:18px; padding:10px; box-shadow: 0 10px 30px rgba(0,0,0,.5); }
.userMenuPanel.right{ left: var(--x); }
.userMenuPanel.left{ right: var(--x); }
.userItem, .userSubItem{ display:flex; align-items:center; justify-content:space-between; gap:10px; padding:12px 14px; border-radius:12px; background:#131821; color:var(--text); border:1px solid transparent; }
.userItem:hover, .userSubItem:hover{ background:#1a202b; border-color:#283142; }
.userItem.danger{ background:#211516; color:#ffb3b3; border-color:#3a1d20; }
.userItem.danger:hover{ background:#2a181b; }
.userMail{ background:#0f1217; border:1px solid #222a35; padding:12px 14px; border-radius:12px; font-weight:600; color:#b8c0cc; }
.userRow{ display:flex; flex-direction:column; gap:10px; }
.userSection{ display:flex; flex-direction:column; gap:8px; margin-top:8px; }
.userSubmenu{ position:absolute; top:0; transform:translateY(0); min-width: 280px; background:#0f1217; border:1px solid #1f2630; border-radius:16px; padding:10px; box-shadow: 0 10px 30px rgba(0,0,0,.5); }
.userMenuPanel.right .userSubmenu{ left: calc(100% + 8px); }
.userMenuPanel.left .userSubmenu{ right: calc(100% + 8px); }
.userCaret{ rotate: 0deg; transition: transform .15s ease; }
.userItem[aria-expanded="true"] .userCaret{ transform: rotate(90deg); }


/* === Side submenu fixed outside main menu === */
.userSubmenu.fixed{ position: fixed; z-index: 1100; }

/* === Sticky bottom user dock === */
.sidebarL{display:flex;flex-direction:column;}
.sidebarL .sidebarBody{flex:1;overflow:auto;}
.footerUserWrap{position:sticky;bottom:12px;padding-top:12px;background:linear-gradient(transparent,rgba(7,10,14,.35) 40%, var(--bg) 85%);}
footer.userDock{position:sticky;bottom:12px;}

.sidebarL{min-height:100vh;}

/* Make user menu compact and 12px */
#user-menu-portal .panel{font-size:12px}
#user-menu-portal .panel .row{padding:6px 10px;margin:4px 0;border-radius:10px}
